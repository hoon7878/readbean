<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>javascript/json.html</title>
    <style>
        * {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }
    </style>
</head>

<body>
    <script>
        let jsonData = `{"employees":[
        {"firstName":"John", "lastName":"Doe"},
        {"firstName":"Anna", "lastName":"Smith"},
        {"firstName":"Peter", "lastName":"Jones"}
        ]}`;


        function clickFnc(e) {
            let btn = e.target; //button 태그를 가져오겠다.
            console.log(btn.parentNode.remove()); //button의 부모태그 li 삭제.
        }

        function mOver(e) {
            e.target.style.backgroundColor = 'yellow';
        }

        function mOut(e) {
            e.target.style.backgroundColor = '';
        }

        let obj = JSON.parse(jsonData); //json => object.
        const employees = obj.employees;

        document.write('<ul>');
             
            employees.forEach(function(obj, idx, ary) {  //for.Each는 배열에서 하나씩 가지고 와서 쓰겠다는 명령어. 
                                                         // obj, idx, ary는 그 배열안에서 오브젝트,인덱스,배열 자체를 쓰겠다는 거.
                document.write('<li onmouseout="mOut(event)" onmouseover="mOver(event)">' + obj.firstName + '-' + obj.lastName + '<button onclick="clickFnc(event)">삭제</button>' +'</li>');
            });
        
        document.write('</ul>'); 

        //console.log(obj);

        // console.log(obj.employees[0].firstName + ',' + obj.employees[0].lastName);
        // console.log(obj.employees[1].firstName + ',' + obj.employees[1].lastName);
        // console.log(obj.employees[2].firstName + ',' + obj.employees[2].lastName);
    </script>

</body>
</html>